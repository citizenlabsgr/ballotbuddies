<tr class="align-middle {% if not voter.complete %}text-muted{% endif %}">

    <th scope="row">
        <span class="d-block d-sm-none" {% if "@" in voter.display_name %}style="word-break: break-all;"{% endif %}>
            {{ voter.display_name }}
        </span>
        <span class="d-none d-sm-block">
            {{ voter.display_name }}
        </span>
    </th>

    {% if voter in recommended %}
    <td></td> <!-- Registered -->
    <td class="d-none d-lg-table-cell"></td> <!-- Absentee: Recieved -->
    <td class="d-none d-lg-table-cell"></td> <!-- Absentee: Approved -->
    <td class="d-none d-sm-table-cell"></td> <!-- Ballot: Available -->
    <td class="d-none d-lg-table-cell"></td> <!-- Ballot: Sent -->
    <td class="d-none d-lg-table-cell"></td> <!-- Ballot: Recieved -->
    <td class=""></td> <!-- Election: Voted -->
    <td class="d-none d-md-table-cell"></td> <!-- Election: Deadline -->
    <td></td> <!-- Last Updated -->
    {% else %}

    <td class="text-center table-{{ voter.progress.registered.color }}" style="white-space: nowrap;">
        {% if voter.progress.registered.url %}
        <a href="{{ voter.progress.registered.url }}" target="_blank" class="ms-1 text-decoration-none">
            {{ voter.progress.registered }}
        </a>
        {% else %}
        {{ voter.progress.registered }}
        {% endif %}
        <button class="btn btn-sm btn-outline-dark ms-2 p-1 py-0 d-lg-none" type="button"
            data-bs-toggle="collapse" data-bs-target="#status-{{ voter.slug }}" aria-expanded="false" aria-controls="status-{{ voter.slug }}">
            â–¼
        </button>
    </td>

    <td class="text-center table-{{ voter.progress.ballot_available.color }} d-none d-sm-table-cell d-lg-none">
        {{ voter.progress.ballot_available }}
        {% if voter.progress.ballot_available.url %}
        <a href="{{ voter.progress.ballot_available.url }}" target="_blank" class="ms-1 text-decoration-none">ðŸ”—</a>
        {% endif %}
    </td>

    <td class="text-center table-{{ voter.progress.absentee_received.color }} d-none d-lg-table-cell">
        {{ voter.progress.absentee_received }}
    </td>

    <td class="text-center table-{{ voter.progress.absentee_approved.color }} d-none d-lg-table-cell">
        {% if voter.progress.absentee_approved.url %}
        <a href="{{ voter.progress.absentee_approved.url }}" target="_blank" class="ms-1 text-decoration-none">
            {{ voter.progress.absentee_approved }}
        </a>
        {% else %}
        {{ voter.progress.absentee_approved }}
        {% endif %}
    </td>

    <td class="text-center table-{{ voter.progress.ballot_available.color }} d-none d-lg-table-cell">
        {{ voter.progress.ballot_available }}
        {% if voter.progress.ballot_available.url %}
        <a href="{{ voter.progress.ballot_available.url }}" target="_blank" class="ms-1 text-decoration-none">ðŸ”—</a>
        {% endif %}
    </td>

    <td class="text-center table-{{ voter.progress.ballot_sent.color }} d-none d-lg-table-cell">
        {{ voter.progress.ballot_sent }}
    </td>

    <td class="text-center table-{{ voter.progress.ballot_received.color }} d-none d-lg-table-cell">
        {{ voter.progress.ballot_received }}
    </td>

    <td class="text-center table-{{ voter.progress.election.color }} d-none d-md-table-cell">
        {{ voter.progress.election.delta_date }}
    </td>

    <td class="text-center table-{{ voter.progress.voted.color }}">
        {{ voter.progress.voted.icon }}
    </td>

    <td class="text-center pe-0">
        {{ voter.updated_humanized }}
    </td>

    {% endif %}

    <td class="text-end">
        <form>{% csrf_token %}

        {% if voter.user == request.user %}
        <a class="btn btn-sm btn-primary" href="{% url 'buddies:profile' %}">
            <span class="d-none d-sm-inline">View</span>
            <span class="d-inline d-sm-none">âœŽ</span>
        </a>
        {% elif voter in recommended %}
        <div class="btn-group" role="group" aria-label="Recommended friend">
            <button class="btn btn-sm btn-success"
                hx-post="{% url 'buddies:status' slug=voter.slug %}"
                hx-vals='{ "add": true }'
                hx-trigger="click"
                hx-target="closest tr"
                hx-swap="outerHTML">
                <span class="d-none d-sm-inline">Add</span>
                <span class="d-inline d-sm-none">+</span>
            </button>
            <button class="btn btn-sm btn-danger"
                hx-post="{% url 'buddies:status' slug=voter.slug %}"
                hx-vals='{ "ignore": true }'
                hx-trigger="click"
                hx-target="closest tr"
                hx-swap="outerHTML">
                <span class="d-none d-sm-inline">Ignore</span>
                <span class="d-inline d-sm-none">-</span>
            </button>
        </div>
        {% elif voter.complete %}
        <button class="btn btn-sm btn-secondary"
            {% if not request.user.is_authenticated %}disabled{% endif %}
            hx-post="{% url 'buddies:status' slug=voter.slug %}"
            hx-trigger="click"
            hx-target="closest tr"
            hx-swap="outerHTML">
            <span class="d-none d-sm-inline">Refresh</span>
            <span class="d-inline d-sm-none">â†º</span>
        </button>
        {% endif %}

        </form>
    </td>

</tr>

<tr class="collapse" id="status-{{ voter.slug }}">
    <td colspan="100%" class="p-3">
        {% include "profile/_status.html" %}
    </td>
</tr>
