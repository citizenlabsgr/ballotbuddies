{% load markdownify %}

<style>
p {
    margin-bottom: 0.25em;
}
ul {
    margin-bottom: 0.25em !important;
}
</style>

<ol>
{% for proposal in proposals %}
    <li class="mb-2">

        <b>{{ proposal.name }}</b>

        <div class="mb-1">{{ proposal.description|markdownify }}</div>

        {% if not district %}
        <div>
            <b>District:</b>
            <a class="text-decoration-none"
                href="{% url 'explore:district' proposal.district.id %}"
                hx-boost="true">
                {{ proposal.district.name }}
            </a>
            ({{ proposal.district.category }})
        </div>
        {% endif %}

        {% if not election %}
        <div>
            <b>Election:</b>
            <a class="text-decoration-none"
                href="{% url 'explore:election' proposal.election.id %}"
                hx-boost="true">
                {{ proposal.election.name }}
            </a>
            ({{ proposal.election.date }})
        </div>
        {% endif %}

    </li>

    {% if forloop.revcounter < 5 and count >= limit %}
    <span hx-trigger="revealed"
        hx-get="{{ request.path }}?limit={{ limit|add:step }}"
        hx-target="closest ol"
        hx-swap="outerHTML">
    </span>
    {% endif %}

{% endfor %}
</ol>
